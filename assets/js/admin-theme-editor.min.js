!function(h){"use strict";window.PUM_Admin=window.PUM_Admin||{},window.pum_theme_settings_editor=window.pum_theme_settings_editor||{form_args:{},current_values:{}},PUM_Admin.themeEditor={preview_fixed_scroll:function(){var t=h("#pum_theme_preview"),e=t.parent(),o=t.offset().top-50;h(window).on("scroll",function(){h("> .postbox:visible",e).index(t)===h("> .postbox:visible",e).length-1&&h(window).scrollTop()>=o?t.css({left:t.offset().left,width:t.width(),height:t.height(),position:"fixed",top:50}):t.removeAttr("style")})},update_font_options:function(t){var e,o,i=h('select[id="'+t+'_font_family"]'),n=h('select[id="'+t+'_font_weight"]'),l=h('select[id="'+t+'_font_style"]'),s=n.find("option"),r=l.find("option"),_=[400,300,700,100,200,500,600,800,900],a=["","italic"],c=i.val(),p=n.val(),d=l.val();if(void 0!==pum_google_fonts[c]){if(e=pum_google_fonts[c],s.prop("disabled",!0),r.prop("disabled",!0),e.variants.length)for(o=0;e.variants.length>o;o+=1)"regular"===e.variants[o]?(h('option[value="400"]',n).prop("disabled",!1),h('option[value=""]',l).prop("disabled",!1)):(0<=e.variants[o].indexOf("italic")&&h('option[value="italic"]',l).prop("disabled",!1),h('option[value="'+parseInt(e.variants[o],10)+'"]',n).prop("disabled",!1))}else s.prop("disabled",!1),r.prop("disabled",!1);if(""===p||s.filter('[value="'+p+'"]').is(":disabled"))for(o=0;o<_.length;o+=1)if(!s.filter('[value="'+_[o]+'"]').is(":disabled")){n.val(_[o]);break}if(r.filter('[value="'+d+'"]').is(":disabled"))for(o=0;o<a.length;o+=1)if(!r.filter('[value="'+a[o]+'"]').is(":disabled")){l.val(a[o]);break}i.trigger("change.select2"),n.trigger("change.select2"),i.trigger("change.select2"),n=n.parents(".pum-field"),1<s.filter(":not(:disabled)").length?n.show():n.hide(),i=l.parents(".pum-field"),1<r.filter(":not(:disabled)").length?i.show():i.hide()},update_font_selectboxes:function(){return h('select[id$="_font_family"]').each(function(){PUM_Admin.themeEditor.update_font_options(h(this).attr("id").replace("_font_family",""))})},refresh_preview:function(){var t=h("#pum-theme-settings-container").pumSerializeObject().theme_settings;this.restyle_preview(t)},restyle_preview:function(t){var e,o=h(".pum-popup-overlay"),i=h(".pum-popup-container"),n=h(".pum-popup-title",i),l=h(".pum-popup-content",i),s=h(".pum-popup-close",i),r="yes"===t.container_boxshadow_inset?"inset ":"",_="yes"===t.close_boxshadow_inset?"inset ":"";switch(void 0!==pum_google_fonts[t.title_font_family]&&(e="//fonts.googleapis.com/css?family="+t.title_font_family,"normal"!==t.title_font_weight&&(e+=":"+t.title_font_weight),"italic"===t.title_font_style&&(-1===e.indexOf(":")&&(e+=":"),e+="italic"),h("body").append('<link href="'+e+'" rel="stylesheet" type="text/css">')),void 0!==pum_google_fonts[t.content_font_family]&&(e="//fonts.googleapis.com/css?family="+t.content_font_family,"normal"!==t.content_font_weight&&(e+=":"+t.content_font_weight),"italic"===t.content_font_style&&(-1===e.indexOf(":")&&(e+=":"),e+="italic"),h("body").append('<link href="'+e+'" rel="stylesheet" type="text/css">')),void 0!==pum_google_fonts[t.close_font_family]&&(e="//fonts.googleapis.com/css?family="+t.close_font_family,"normal"!==t.close_font_weight&&(e+=":"+t.close_font_weight),"italic"===t.close_font_style&&(-1===e.indexOf(":")&&(e+=":"),e+="italic"),h("body").append('<link href="'+e+'" rel="stylesheet" type="text/css">')),o.removeAttr("style").css({backgroundColor:window.PUM_Admin.utils.convert_hex(t.overlay_background_color,t.overlay_background_opacity)}),i.removeAttr("style").css({padding:t.container_padding+"px",backgroundColor:window.PUM_Admin.utils.convert_hex(t.container_background_color,t.container_background_opacity),borderStyle:t.container_border_style,borderColor:t.container_border_color,borderWidth:t.container_border_width+"px",borderRadius:t.container_border_radius+"px",boxShadow:r+t.container_boxshadow_horizontal+"px "+t.container_boxshadow_vertical+"px "+t.container_boxshadow_blur+"px "+t.container_boxshadow_spread+"px "+window.PUM_Admin.utils.convert_hex(t.container_boxshadow_color,t.container_boxshadow_opacity)}),n.removeAttr("style").css({color:t.title_font_color,lineHeight:t.title_line_height+"px",fontSize:t.title_font_size+"px",fontFamily:t.title_font_family,fontStyle:t.title_font_style,fontWeight:t.title_font_weight,textAlign:t.title_text_align,textShadow:t.title_textshadow_horizontal+"px "+t.title_textshadow_vertical+"px "+t.title_textshadow_blur+"px "+window.PUM_Admin.utils.convert_hex(t.title_textshadow_color,t.title_textshadow_opacity)}),l.removeAttr("style").css({color:t.content_font_color,fontFamily:t.content_font_family,fontStyle:t.content_font_style,fontWeight:t.content_font_weight}),s.html(t.close_text).removeAttr("style").css({padding:t.close_padding+"px",height:0<t.close_height?t.close_height+"px":"auto",width:0<t.close_width?t.close_width+"px":"auto",backgroundColor:window.PUM_Admin.utils.convert_hex(t.close_background_color,t.close_background_opacity),color:t.close_font_color,lineHeight:t.close_line_height+"px",fontSize:t.close_font_size+"px",fontFamily:t.close_font_family,fontWeight:t.close_font_weight,fontStyle:t.close_font_style,borderStyle:t.close_border_style,borderColor:t.close_border_color,borderWidth:t.close_border_width+"px",borderRadius:t.close_border_radius+"px",boxShadow:_+t.close_boxshadow_horizontal+"px "+t.close_boxshadow_vertical+"px "+t.close_boxshadow_blur+"px "+t.close_boxshadow_spread+"px "+window.PUM_Admin.utils.convert_hex(t.close_boxshadow_color,t.close_boxshadow_opacity),textShadow:t.close_textshadow_horizontal+"px "+t.close_textshadow_vertical+"px "+t.close_textshadow_blur+"px "+window.PUM_Admin.utils.convert_hex(t.close_textshadow_color,t.close_textshadow_opacity)}),t.close_location){case"topleft":s.css({top:t.close_position_top+"px",left:t.close_position_left+"px"});break;case"topright":s.css({top:t.close_position_top+"px",right:t.close_position_right+"px"});break;case"bottomleft":s.css({bottom:t.close_position_bottom+"px",left:t.close_position_left+"px"});break;case"bottomright":s.css({bottom:t.close_position_bottom+"px",right:t.close_position_right+"px"})}h(document).trigger("popmake-admin-retheme",[t]),h(document).trigger("pumRestylePreview",[t])}},h(document).ready(function(){h(this).trigger("pum_init");var t=h("#pum-theme-settings-container"),e=pum_theme_settings_editor.form_args||{},o=pum_theme_settings_editor.current_values||{};t.length&&(t.find(".pum-no-js").hide(),PUM_Admin.forms.render(e,o,t)),PUM_Admin.themeEditor.preview_fixed_scroll(),PUM_Admin.themeEditor.refresh_preview()}).on("change",'select[id$="_font_family"]',function(){var t=h(this).attr("id").replace("_font_family","");PUM_Admin.themeEditor.update_font_options(t)}).on("click",".pum-popup-overlay, .pum-popup-container, .pum-popup-title, .pum-popup-content, .pum-popup-close",function(t){var e=h(this).attr("class");switch(t.preventDefault(),t.stopPropagation(),e){case"pum-popup-overlay":h('a[href="#pum-theme-settings_overlay"]')[0].click();break;case"pum-popup-container":h('a[href="#pum-theme-settings_container"]')[0].click();break;case"pum-popup-title":h('a[href="#pum-theme-settings_title"]')[0].click();break;case"pum-popup-content":h('a[href="#pum-theme-settings_content"]')[0].click();break;case"pum-popup-close":h('a[href="#pum-theme-settings_close"]')[0].click()}h("html, body").animate({scrollTop:h("#pum_theme_settings").offset().top-40+"px"})}).on("change input focusout","select, input",function(){PUM_Admin.themeEditor.refresh_preview()})}(jQuery);